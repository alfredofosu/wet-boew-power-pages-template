{% extends 'GCWeb/App/Page/Default' %}

{% block main %}
  <div class="search-container">
    {% assign page_size = 10 %}
    {% assign current_page = request.params.page | default: 1 %}
    {% if website.selected_language.code == "en" %}
      {%- assign oText = "of" -%}
      {%- assign rText = "Results" -%}
      {%- assign rMessage = "Try adjusting your search terms or browse our knowledge articles to find what you're looking for." -%}
    {% else %}
      {%- assign oText = "sur" -%}
      {%- assign rText = "r√©sultats" -%}
      {%- assign rMessage = "Essayez d'ajuster vos termes de recherche ou parcourez nos articles de connaissances pour trouver ce que vous cherchez." -%}
    {% endif %}

     {% assign rt = snippets["Search/ResultsTitle"] %}
    {% if rt %}
      {% assign title = rt | liquid %}
    {% else %}
      {% assign title = page.title %}
    {% endif %}
    {% assign title = title | truncate: 115 %}

    {% searchindex query: request.params.q, page: current_page, page_size: page_size %}
      {% if searchindex.results.size > 0 %}
        <div class="search-header">
          <div class="search-query">{{ title }}</div>
          {% assign rc = snippets["Search/ResultsCount"] | liquid %}
          <p class="result-count">{{ current_page }} - {{ page_size }} {{ oText }} {{ searchindex.approximate_total_hits }} {{ rText }}</p>
        </div>

        <ul class="search-results">
          {% for result in searchindex.results %}
          <li class="search-result-item">
            <h4 class="result-title">
              <a class="result-link" title="{{ result.title | escape }}" href="{{ result.url | escape }}">{{ result.title | escape }}</a>
            </h4>
            <p class="fragment">{{ result.fragment }}</p>
          </li>
          {% endfor %}
        </ul>

        <div class="pagination-container">
          {% include 'Pagination' current_page: searchindex.page, page_size: page_size, total: searchindex.approximate_total_hits %}
        </div>
      {% else %}
        <div class="no-results-container">
          <div class="no-results-icon">üîç</div>
          <h3 class="no-results-title">{{ snippets["Search/NoResults"] }}</h3>
          <p class="no-results-message">{{ rMessage }}</p>
        </div>
      {% endif %}
    {% endsearchindex %}
  </div>
{% endblock %}